name: 'Compile All LaTeX'
description: 'Searches all tex files and compiles them via Rubber'
branding:
  icon: book-open
  color: orange
inputs:
  command:
    description: The command to invoke to compile. Defaults to 'rubber --inplace -d --synctex -s'
    required: false
    default: rubber --unsafe --inplace -d --synctex -s -W all
  verbose:
    description: Adds more output
    required: false
    default: false
  success:
    description: The name of the environment variable that will hold the list of correctly compiled files. Since GitHub Actions does not support multiline output, this action writes on a variable. 
    required: false
    default: LATEX_SUCCESSES
  outputs:
    successes:
      description: "A comma-separated list of all successfully compiled files"
      value: ${{ steps.compile.outputs.successes }}
runs:
  using: "docker"
  image: Dockerfile
  id: compile
  args:
    - ${{ inputs.command }}
    - ${{ inputs.verbose }}
    - ${{ inputs.success }}
